package ru.yandex.bolts.collection;

import java.io.Serializable;

import ru.yandex.bolts.function.Function2;
import ru.yandex.bolts.function.forhuman.BinaryFunction;
import ru.yandex.bolts.function.forhuman.Mapper;

/**
 * Pair
 *
 * @author Stepan Koltsov
 */
public class Tuple2<T1, T2> implements Serializable {
    private static final long serialVersionUID = 3326001902955370713L;
    
    private T1 t1;
    private T2 t2;

    public Tuple2(T1 t1, T2 t2) {
        this.t1 = t1;
        this.t2 = t2;
    }

    /** First */
    public T1 get1() {
        return t1;
    }

    /** Second */
    public T2 get2() {
        return t2;
    }

    public <R> R reduce(Function2<T1, T2, R> bf) {
        return bf.apply(t1, t2);
    }

    public Tuple2<T2, T1> swap() {
        return tuple(t2, t1);
    }
    
    @SuppressWarnings("unchecked")
    public <T3, T4> Tuple2<T3, T4> uncheckedCast() {
        return (Tuple2<T3, T4>) this;
    }

    @SuppressWarnings({"RedundantIfStatement"})
    public boolean equals(Object o) {
        // generated by Idea
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Tuple2<?, ?> tuple2 = (Tuple2<?, ?>) o;

        if (t1 != null ? !t1.equals(tuple2.t1) : tuple2.t1 != null) return false;
        if (t2 != null ? !t2.equals(tuple2.t2) : tuple2.t2 != null) return false;

        return true;
    }

    public int hashCode() {
        // generated by Idea
        int result = (t1 != null ? t1.hashCode() : 0);
        result = 31 * result + (t2 != null ? t2.hashCode() : 0);
        return result;
    }

    public String toString() {
        return "(" + t1 + ", " + t2 + ")";
    }

    public static <A, B> BinaryFunction<A, B, Tuple2<A, B>> consM() {
        return new BinaryFunction<A, B, Tuple2<A, B>>() {
            public Tuple2<A, B> call(A a, B b) {
                return tuple(a, b);
            }
        };
    }

    public static <A, B> Mapper<Tuple2<A, B>, A> get1M() {
        return new Mapper<Tuple2<A, B>, A>() {
            public A map(Tuple2<A, B> tuple) {
                return tuple.get1();
            }
        };
    }

    public static <A, B> Mapper<Tuple2<A, B>, B> get2M() {
        return new Mapper<Tuple2<A, B>, B>() {
            public B map(Tuple2<A, B> tuple) {
                return tuple.get2();
            }
        };
    }

    public static <A, B> Mapper<Tuple2<A, B>, Tuple2<B, A>> swapM() {
        return new Mapper<Tuple2<A, B>, Tuple2<B, A>>() {
            public Tuple2<B, A> map(Tuple2<A, B> tuple) {
                return tuple.swap();
            }
        };
    }

    /*
    public static <A, B, C> Mapper<Tuple2<A, B>, Tuple2<C, B>> map1M(final Function1<A, C> m) {
        return new Mapper<Tuple2<A, B>, Tuple2<C, B>>() {
            public Tuple2<C, B> map(Tuple2<A, B> tuple) {
                return tuple(m.apply(tuple.get1()), tuple.get2());
            }
        };
    }

    public static <A, B, C> Mapper<Tuple2<A, B>, Tuple2<A, C>> map2M(final Function1<B, C> m) {
        return new Mapper<Tuple2<A, B>, Tuple2<A, C>>() {
            public Tuple2<A, C> map(Tuple2<A, B> tuple) {
                return tuple(tuple.get1(), m.apply(tuple.get2()));
            }
        };
    }
    */

    /** Construct */
    public static <A, B> Tuple2<A, B> tuple(A a, B b) {
        return new Tuple2<A,B>(a, b);
    }
} //~
